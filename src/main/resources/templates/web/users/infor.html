<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{web/layout-default.html}">

<body>

	<!--Thêm dòng này vào-->
	<section layout:fragment="content" class="user">

		<!--Viết nội dung từ đây-->
		<div class="row">
			<div class="col mt-4">
				<div class="container">
					<!-- Page Title -->
					<div class="d-sm-flex align-items-center justify-content-between mb-4">
						<h1 class="h3 mb-0 text-gray-800">User</h1>
					</div>
				</div>
				<div class="container">
					<div th:if="${message != null}">
						<span th:text="${message}"></span>
					</div>
					
					<div class="row align-items-start">
					  <div class="nav flex-column nav-pills col-md-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
						<div class="avatar">
							<i class="fa-solid fa-user text-secondary"></i>
							<span th:text="'#' + ${user.fullName}" class="fs-5 text-secondary"></span>
						</div>
					    <button class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill" data-bs-target="#v-pills-home" type="button" role="tab" aria-controls="v-pills-home" aria-selected="true">Tài khoản</button>
					    <button class="nav-link" id="v-pills-profile-tab" data-bs-toggle="pill" data-bs-target="#v-pills-profile" type="button" role="tab" aria-controls="v-pills-profile" aria-selected="false">Địa chỉ</button>
					    <button class="nav-link" id="v-pills-disabled-tab" data-bs-toggle="pill" data-bs-target="#v-pills-disabled" type="button" role="tab" aria-controls="v-pills-disabled" aria-selected="false">Đơn hàng</button>
					    <button class="nav-link" id="v-pills-messages-tab" data-bs-toggle="pill" data-bs-target="#v-pills-messages" type="button" role="tab" aria-controls="v-pills-messages" aria-selected="false">Thoát</button>
					  </div>
					  <div class="tab-content col-md-9" id="v-pills-tabContent">
					    <div class="tab-pane fade show active" style="margin-left: 15px;" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab" tabindex="0">
							<form action="/web/users/saveOrUpdate" class="" method="POST">
								<div class="card">
									<div class="card-body">
										<div class="mb-3">
											<label for="userId" class="form-label">user ID:</label>
											<input type="hidden" th:value="${true}" th:name="isEdit">
											<input type="text" readonly="readonly" class="form-control"
												th:value="${user.userId}" id="userId" th:name="userId"
												aria-describedby="userId">
										</div>
										<div class="mb-3">
											<label for="fullName" class="form-label">user Name:</label>
											<input type="text" class="form-control" th:value="${user.fullName}"
												id="fullName" th:name="fullName">
										</div>										
										<div class="mb-3">
											<label for="email" class="form-label">user email:</label>
											<input type="text" class="form-control" th:value="${user.email}"
												id="email" th:name="email">
										</div>		
										<div class="mb-3">
											<label for="password" class="form-label">user password:</label>
											<input type="password" class="form-control" th:value="${user.password}"
												id="password" th:name="password">
										</div>	
										<div class="mb-3">
											<label for="phone" class="form-label">user phone:</label>
											<input type="text" class="form-control" th:value="${user.phone}"
												id="phone" th:name="phone">
										</div>
										<div class="mb-3">
											<label for="address" class="form-label">user address:</label>
											<input type="text" class="form-control" th:value="${user.address}"
												id="address" th:name="address">
										</div>
									</div>	
									<div class="card-footer text-muted">
										<button class="btn btn-primary" type="submit"><i class="fas fa-save"></i>
											<span th:text="${user.isEdit ? 'Update' : 'Save'}"></span>
										</button>
									</div>
								</div>		
							</form>
						</div>
						
					    <div class="tab-pane fade" style="margin-left: 15px;" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab" tabindex="0">
							<form th:action="@{'/web/users/updateAddress/' + ${user.email}}" method="POST" >
							    <div class="form-row">
							        <div class="form-group col-md-6">
							            <label for="inputCity">Tỉnh/Thành phố </label>
							            <input type="text" class="form-control" id="inputCity" name="city" placeholder="" th:value="${city}">
							        </div>
							        <div class="form-group col-md-6">
							            <label for="inputDistrict">Quận/Huyện </label>
							            <input type="text" class="form-control" id="inputDistrict" name="district" placeholder="" th:value="${district}">
							        </div>
							        <div class="form-group col-md-6">
							            <label for="inputTown">Xã/Phường </label>
							        	<input type="text" class="form-control" id="inputTown" name="town" placeholder="" th:value="${town}">
							        </div>
							        
							    </div>
							    <div class="form-group">
							        <label for="inputAddr">Địa chỉ</label>
							        <input type="text" class="form-control" id="inputAddr" name="homeaddress" placeholder="" th:value="${homeaddress}">
							    </div>
							    <div class="form-group">
							        <label for="inputTown">Địa chỉ</label>
							        <input type="text" class="form-control" id="inputTown" name="town" placeholder="Town" th:value="${subAdd}">
							    </div>
							    <!-- Các trường ẩn khác nếu cần -->
							    <input type="hidden" th:value="${true}" th:name="isEdit">
							    <div class="card-footer text-muted">
							        <button class="btn btn-primary" type="submit">
							            <i class="fas fa-save"></i>
							            <span th:text="${user.isEdit ? 'Update' : 'Save'}"></span>
							        </button>
							    </div>
							</form>

						</div>
					    <div class="tab-pane fade" id="v-pills-disabled" role="tabpanel" aria-labelledby="v-pills-disabled-tab" tabindex="0">
			         
						 <h6>Order ID: OD45345345435</h6>
			            <article class="card">
			                <div class="card-body row">
			                    <div class="col"> <strong>Estimated Delivery time:</strong> <br>29 nov 2019 </div>
			                    <div class="col"> <strong>Shipping BY:</strong> <br> BLUEDART, | <i class="fa fa-phone"></i> +1598675986 </div>
			                    <div class="col"> <strong>Status:</strong> <br> Picked by the courier </div>
			                    <div class="col"> <strong>Tracking #:</strong> <br> BD045903594059 </div>
			                </div>
			            </article>
			           
			            <hr>
			            <ul class="row">
						    <li th:each="order : ${orderList}" class="col-md-4">
						        <figure class="itemside mb-3">
						            <div class="aside"><img th:src="${order.product.imageUrl}" class="img-sm border" width="100" height="100"></div>
						            <figcaption class="info align-self-center">
						                <p class="title" th:text="${order.product.name + ' <br> ' + order.product.description}"></p>
						                <span class="text-muted" th:text="'$' + ${order.product.price}"></span>
						            </figcaption>
						        </figure>
						    </li>
						</ul>
			
			            <hr>         
			        </div>
					</div>
					    <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab" tabindex="0">Thoát</div>
					  </div>
					</div>
				</div>
			</div>
		</div>
	</section>

</body>

</html>